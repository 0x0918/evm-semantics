#!/usr/bin/env sh

pandoc-tangle --from markdown --to code-k --code k world-state.md > k/world-state.k
pandoc-tangle --from markdown --to code-k --code k dasm.md        > k/dasm.k
pandoc-tangle --from markdown --to code-k --code k data.md        > k/data.k
pandoc-tangle --from markdown --to code-k --code k execution.md   > k/execution.k
pandoc-tangle --from markdown --to code-k --code k evm.md         > k/evm.k

pushd k
kompile --debug --main-module WORLD-STATE --syntax-module WORLD-STATE world-state.k
popd
